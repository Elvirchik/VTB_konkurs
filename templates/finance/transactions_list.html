{% extends "base.html" %}
{% block title %}Операции{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Операции</h2>
  <a href="{% url 'finance:transaction_create' %}" class="btn btn-primary">Добавить операцию</a>
</div>
<table class="table table-striped table-hover shadow-sm bg-white">
  <thead>
    <tr>
      <th>Дата</th>
      <th>Тип</th>
      <th>Категория</th>
      <th>Описание</th>
      <th>Сумма</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for t in transactions %}
    <tr>
      <td>{{ t.date }}</td>
      <td>{{ t.get_type_display }}</td>
      <td>{% if t.category %}{{ t.category.name }}{% else %}-{% endif %}</td>
      <td>{{ t.description }}</td>
      <td class="{% if t.type == 'income' %}text-success{% else %}text-danger{% endif %}">
        {% if t.type == 'income' %}+{% else %}-{% endif %}{{ t.amount }} ₽
      </td>
      <td class="text-end">
        <a href="{% url 'finance:transaction_update' t.pk %}" class="btn btn-sm btn-outline-secondary">Изменить</a>
        <form method="post" action="{% url 'finance:transaction_delete' t.pk %}" class="d-inline">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-outline-danger"
                  onclick="return confirm('Удалить операцию?');">
            Удалить
          </button>
        </form>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center text-muted">Пока нет операций</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
